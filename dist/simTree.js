!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i(1),function(e,t){if(!e||!e.document)throw new Error("simTree need window");!function(e){var t,i=e.document,n={linkParent:!1,response:{name:"text",id:"id",pid:"parent",checked:"checked"}},s=function(e){throw new Error(e)},a=function(e,t){return e.replace(/\{\{(.+?)\}\}/g,function(e,i){return t[i]?t[i]:""})},r=function e(t){if("undefined"==typeof $&&s("simTreeneed jquery"),$.isPlainObject(t)){if(t.el||s("你没有传el"),!(this instanceof e))return new e(t);this.options=$.extend(!0,{},n,t),this.init()}};r.prototype={version:"0.0.1",constructor:r,on:function(e,t,i){var n,s;return this.handles[e]=this.handles[e]||[],n=this.handles[e].isTriggered,s=this.handles[e].args,$.isFunction(t)&&(!0===i?this.handles[e]=[t]:this.handles[e].push(t),n&&t.call(this,s)),this},off:function(e){return this.handles[e]=[],this},trigger:function(e,t){var i,n;for(this.handles[e]=this.handles[e]||[],i=0,n=this.handles[e].length,this.handles[e].isTriggered=!0,this.handles[e].args=t;i<n;i++)this.handles[e][i].call(this,t)},init:function(){var e=this.options,t=e.data;this.handles={},this.$el=$(e.el),this.data=t,this.event(),this.render()},dataCallback:function(){var e=arguments;1===e.length?this.render(e[0]):this.doRender(e[0],e[1])},parse:function(e){var t=this.options,i=t.response,n=[],s={},a=0,r=e.length,o=i.id,d=i.pid;if(t.childNodeAsy)return e;for(;a<r;a++){var h=e[a],c=h[o];if(h.children)return e;c&&(s[c]=h)}for(a=0;a<r;a++){var h=e[a],l=h[d],u=s[l];l&&u?(u.children||(u.children=[])).push(h):n.push(h)}return n},render:function(e){var e=e||this.data;$.isFunction(e)&&e({},this.dataCallback.bind(this)),$.isArray(e)&&(e=this.parse(e),this.doRender(this.$el,e))},doRender:function(e,t,n){var s,r,o,d,h=this.options,c=h.response,l=t.length,u=0,p=c.id,f=c.name,n=n||1,m='<i data-type="{{asy}}" class="sim-tree-spread {{spreadIcon}}"></i><a href="javascript:;"><i class="sim-tree-checkbox"></i>{{text}}</a>',g=e===this.$el,v=$(i.createElement("ul")),k=h.childNodeAsy?"asy":"";for(h.check||(m=m.replace('<i class="sim-tree-checkbox"></i>',""));u<l;u++)s=t[u],r=i.createElement("li"),d=!!s.children,r.innerHTML=a(m,{asy:k,text:s[f],spreadIcon:d?"layui-icon-r":"hidden"}),r.setAttribute("data-level",n),r.setAttribute("data-id",s[p]),(o=$(r)).data("data",s),v.append(o),d&&this.doRender(o,s.children,n+1);l&&e.append(v),g&&v.addClass("sim-tree"),g&&this.trigger("done",t)},event:function(){var e=this;this.$el.off("click").on("click",function(t){var i=$(t.target);return i.hasClass("sim-tree-spread")&&e.spread.call(e,i),i.hasClass("sim-tree-checkbox")&&(i=i.parent()),"a"===i[0].tagName.toLowerCase()&&e.clickNode.call(e,i),!1}),this.$el.on("selectstart",function(){return!1}),this.options.done&&this.on("done",this.options.done),this.options.onClick&&this.on("click",this.options.onClick),this.options.onChange&&this.on("change",this.options.onChange),this.options.onSearch&&this.on("search",this.options.onSearch)},spread:function(e){e.hasClass("layui-icon-r")?this.doSpread(e,!0):this.doSpread(e,!1)},doSpread:function(e,t){var i=e.parent(),n=i.children("ul"),s=i.data("data");s.children&&(t?(e.removeClass("layui-icon-r").addClass("layui-icon-d"),"asy"===e.data("type")&&$.isFunction(this.data)&&(this.data(i.data("data"),this.dataCallback.bind(this,i)),n=i.children("ul"),e.data("type","")),n.addClass("show")):(e.removeClass("layui-icon-d").addClass("layui-icon-r"),n.removeClass("show")))},clickNode:function(e){var i,n,s,a=this,r=e.parent(),o=this.$el.find("li"),d=o.length,h=0,c=[],l=!1;if(this.options.check)for(l=!0,this.doCheck(e.find(".sim-tree-checkbox")),this.options.linkParent&&(n=r.children("ul"),s=n.find(".sim-tree-checkbox"),$.each(s,function(){console.log($(this)),a.doCheck($(this),r.data("checked"),!0)}));h<d;h++)!0===(i=o.eq(h).data()).checked&&c.push(i.data);else t&&t.css("font-weight","normal"),e.css("font-weight","bold"),t=e,i=r.data("data"),c=[i],l=!this.sels||!(this.sels[0]===i);this.sels=c,this.trigger("click",c),l&&this.trigger("change",c)},doCheck:function(e,t,i){var n=e.closest("li"),s=n.data();void 0===t&&(t=!s.checked),!0===t?e.removeClass("sim-tree-semi").addClass("checked"):!1===t?e.removeClass("checked sim-tree-semi"):"semi"===t&&e.removeClass("checked").addClass("sim-tree-semi"),n.data("checked",t),!0===this.options.linkParent&&!i&&this.setParentCheck(n)},setParentCheck:function(e){var t,i=e.parent("ul"),n=i.parent("li"),s=i.children("li"),a=n.find(">a .sim-tree-checkbox"),r=[],o=s.length;n.length&&(e.find(">a .sim-tree-checkbox").hasClass("sim-tree-semi")?this.doCheck(a,"semi"):($.each(s,function(){!0===$(this).data("checked")&&r.push($(this))}),t=r.length,o===t&&this.doCheck(a,!0),t||this.doCheck(a,!1),t>=1&&t<o&&this.doCheck(a,"semi")))},search:function(e){if(this.$el){var t,i,n,e=$.trim(e),s=this.$el.find("li"),a=0,r=s.length,o=[];for(s.hide().children(".sim-tree-spread").addClass("hidden");a<r;a++)i=s.eq(a),t=i.children("a").text(),n=i.data("data"),e?-1!==t.indexOf(e)&&(1!==parseInt(i.data("level"))&&this.expandNode(n[this.options.response.pid]),i.parents("li").add(i).show(),o.push(i)):(i.show(),n.children&&i.children(".sim-tree-spread").removeClass("hidden"));this.trigger("search",e)}},expandNode:function(e){var t=e.addClass?e:this.$el.find("[data-id="+e+"]"),i=t.data("data"),n=i[this.options.response.pid],s=t.children(".sim-tree-spread"),a=parseInt(t.data("level"));i.children&&s.length&&(s.removeClass("hidden"),this.doSpread(s,!0)),1!==a&&this.expandNode(n)},setSelected:function(e){var t=this,i=e,n=[],s=[];"string"!=typeof i&&"number"!=typeof i||(i=[i]),$.isArray(i)&&(this.options.check||(i=[i[0]]),$.each(i,function(e,i){var a=t.$el.find("[data-id="+i+"]"),r=a.children("a"),o=r.children(".sim-tree-checkbox"),d=a.data("data");if(!a.length)return!0;o.length?t.doCheck(o,!0):r.css("font-weight","bold"),1!==parseInt(a.data("level"))&&t.expandNode(d[t.options.response.pid]),n.push(d),s.push(a[0])}),t.sels=n,t.trigger("click",n))},getSelected:function(){return this.sels},destroy:function(){for(var e in this.$el.html(""),this)delete this[e]},refresh:function(e){this.$el.html(""),this.render(e)}},e.simTree=r}(e)}("undefined"!=typeof window?window:void 0)},function(e,t,i){}]);